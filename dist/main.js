(()=>{"use strict";(e=>{const t=document.getElementById("timer-hours"),o=document.getElementById("timer-minutes"),n=document.getElementById("timer-seconds");let c;const r=()=>{c=requestAnimationFrame(r);const e=(()=>{const e=(new Date("29 march 2021 20:52:10").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60),n=e=>e<10?e="0"+e:e;return{timeRemaining:e,hours:n(Math.floor(e/60/60)),minutes:n(o),seconds:n(t)}})();e.timeRemaining>0&&(t.textContent=e.hours,o.textContent=e.minutes,n.textContent=e.seconds),e.timeRemaining<=0&&(clearInterval(r),t.textContent="00",o.textContent="00",n.textContent="00")};c=requestAnimationFrame(r)})(),(()=>{const e=document.querySelector("menu"),t=()=>{e.classList.toggle("active-menu")};document.addEventListener("click",(t=>{const o=t.target,n=o.closest(".menu"),c=o.closest(".close-btn"),r=o.closest("ul>li>a");null!==n&&window.innerWidth<768?e.style.transform="translateX(100%)":(null!==c&&window.innerWidth<768||null!==r&&window.innerWidth<768)&&(e.style.transform="translateX(-100%)")})),document.addEventListener("click",(o=>{const n=o.target,c=n.closest(".menu"),r=n.closest(".close-btn"),a=n.closest("ul>li>a");null!==c&&window.innerWidth>=768?(e.removeAttribute("style"),t()):(null!==r||null!==a)&&window.innerWidth>=768&&t()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector(".popup-content"),o=document.querySelector(".service"),n=document.querySelectorAll(".popup-btn");o.addEventListener("click",(o=>{const c=o.target;c.classList.contains("popup-btn")&&n.forEach((o=>{o===c&&window.innerWidth<768?e.style.display="block":o===c&&window.innerWidth>=768&&(e.style.display="block",(()=>{let e=0;const o=document.documentElement.offsetHeight/50;let n;const c=()=>{n=requestAnimationFrame(c),e+=5,e-5<o?t.style.top=e+"px":e===o&&cancelAnimationFrame(c)};n=requestAnimationFrame(c)})())}))})),e.addEventListener("click",(t=>{let o=t.target;o.classList.contains("popup-close")?e.style.display="none":(o=o.closest(".popup-content"),o||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n.classList.contains("service-header-tab")&&t.forEach(((e,c)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("hidden")):(t[n].classList.remove("active"),o[n].classList.add("hidden"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content");e.forEach((()=>{const e=document.createElement("li");e.setAttribute("class","dot"),document.querySelector(".portfolio-dots").appendChild(e)}));let o,n=0;const c=document.querySelectorAll(".dot");0===n&&c[0].setAttribute("class","dot dot-active");const r=(e,t,o)=>{e[t].classList.remove(o)},a=(e,t,o)=>{e[t].classList.add(o)},l=()=>{r(e,n,"portfolio-item-active"),r(c,n,"dot-active"),n++,n>=e.length&&(n=0),a(e,n,"portfolio-item-active"),a(c,n,"dot-active")},s=(e=3e3)=>{o=setInterval(l,e)};t.addEventListener("click",(t=>{t.preventDefault();const o=t.target;o.matches(".portfolio-btn, .dot")&&(r(e,n,"portfolio-item-active"),r(c,n,"dot-active"),o.matches("#arrow-right")?n++:o.matches("#arrow-left")?n--:o.matches(".dot")&&c.forEach(((e,t)=>{e===o&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),a(e,n,"portfolio-item-active"),a(c,n,"dot-active"))})),t.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(o)})),t.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&s()})),s()})(),(()=>{const e=document.querySelectorAll(".command__photo");e.forEach((e=>{e.addEventListener("mouseover",(e=>{const t=e.target;[t.src,t.dataset.img]=[t.dataset.img,t.src]}))})),e.forEach((e=>{e.addEventListener("mouseout",(e=>{const t=e.target;[t.dataset.img,t.src]=[t.src,t.dataset.img]}))}))})(),document.querySelector(".calc-block").addEventListener("input",(e=>{const t=e.target;t.matches('[type="text"]')&&(t.value=t.value.replace(/\D/g,""))})),document.querySelectorAll('[placeholder="Номер телефона"]').forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^+0-9]/g,"")}))})),document.querySelectorAll('[placeholder="Ваш номер телефона"]').forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^+0-9]/g,"")}))})),document.querySelectorAll('[placeholder="E-mail"').forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^a-z@\-_.!~*']/gi,"")}))})),document.querySelectorAll('[placeholder="Ваш E-mail"').forEach((e=>{e.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^a-z@\-_.!~*']/gi,"")}))})),(()=>{const e=document.querySelectorAll('[placeholder="Ваше имя"]'),t=document.querySelectorAll('[placeholder="Ваше сообщение"]'),o=e=>{const t=e.target;t.value=t.value.replace(/[^а-я-ё\-\s]/gi,"")},n=e=>{const t=e.target;t.value=t.value.replace(/[^а-я-ё\d\s.,!?:;]/gi,"")};e.forEach((e=>{e.addEventListener("input",o),e.addEventListener("blur",(e=>{const t=e.target;t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/([А-ЯЁ])/g,(e=>e.toLowerCase())),t.value=t.value.replace(/(( |^)[а-яё])(?=[а-яё])/g,(e=>e.toUpperCase()))}))})),t.forEach((e=>{e.addEventListener("input",n),e.addEventListener("blur",(e=>{const t=e.target;t.value=t.value.replace(/^[ -]*|( |-)(?=\1)|[ -]*$/g,"").replace(/ +/g," ").trim()}))}))})(),document.querySelectorAll("form").forEach((e=>{e.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(e=>{const t=e.target;if("Номер телефона"===t.placeholder||"Ваш номер телефона"===t.placeholder){const e=(e=>{const o=e.substr(0,1);let n=t.value;const c=n.replace(/[a-zа-яё/.,\-=_)({*&$%#@'"!~^:;?`<>№|\\})]/gi,"");return n=c,n.length<11?(n="",n):"+"===o?n.substr(1).includes("+")||"7"!==n[1]?(n="",n):(n=n.substr(0,12),n):"7"===o||"8"===o?n.substr(1).includes("+")?(n="",n):(n=n.substr(0,11),n):"+"!==o||"7"!==o||"8"!==o?(n="",n):void 0})(t.value.replace(/[a-zа-яё/.,\-=_)({*&$%#@'"!~^:;?`<>№|\\})]/gi,""));t.value=e}}))}))})),((e=100)=>{const t=document.querySelector(".calc-block"),o=document.querySelector(".calc-type"),n=document.querySelector(".calc-square"),c=document.querySelector(".calc-count"),r=document.querySelector(".calc-day"),a=document.getElementById("total");t.addEventListener("change",(t=>{const l=t.target;(l.matches(".calc-type")||l.matches(".calc-square")||l.matches(".calc-count")||l.matches(".calc-day"))&&(()=>{let t=0,l=1,s=1;const i=+o.options[o.selectedIndex].value,d=+n.value;c.value>1&&(l+=(c.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),i&&d&&(t=e*i*d*l*s,(e=>{const t=.1*e;let o=0;const n=Math.floor(1e3/(e/t)),c=setInterval((()=>{o+=t,o===e&&clearInterval(c),a.textContent=o}),n)})(t))})()}))})(),document.body.addEventListener("submit",(e=>{e.preventDefault(),(e=>{const t=document.createElement("div");t.style.cssText="font-size: 2rem; \n  color: white; \n  ",e.appendChild(t),t.textContent="Загрузка...";const o=new FormData(e),n={};o.forEach(((e,t)=>{n[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(n).then((o=>{if(200!==o.status)throw new Error("status network not 200");e.reset(),t.innerHTML="Отправлено!",setTimeout((()=>{t.parentNode.removeChild(t)}),5e3)})).catch((e=>{t.innerHTML="Что-то пошло не так...",console.error(e)}))})(e.target)}))})();