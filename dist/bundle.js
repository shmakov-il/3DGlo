(()=>{"use strict";var e,t,n,r,o,a,c,i,l,u,s,d,v,m,f,p,h;f=document.getElementById("timer-hours"),p=document.getElementById("timer-minutes"),h=document.getElementById("timer-seconds"),requestAnimationFrame((function e(){requestAnimationFrame(e);var t,n,r,o,a=(t=(new Date("12 march 2021 20:52:10").getTime()-(new Date).getTime())/1e3,n=Math.floor(t%60),r=Math.floor(t/60%60),{timeRemaining:t,hours:(o=function(e){return e<10?e="0"+e:e})(Math.floor(t/60/60)),minutes:o(r),seconds:o(n)});a.timeRemaining>0&&(f.textContent=a.hours,p.textContent=a.minutes,h.textContent=a.seconds),a.timeRemaining<=0&&(clearInterval(e),f.textContent="00",p.textContent="00",h.textContent="00")})),v=document.querySelector("menu"),m=function(){v.classList.toggle("active-menu")},document.addEventListener("click",(function(e){var t=e.target,n=t.closest(".menu"),r=t.closest(".close-btn"),o=t.closest("ul>li>a");null!==n&&window.innerWidth<768?v.style.transform="translateX(100%)":(null!==r&&window.innerWidth<768||null!==o&&window.innerWidth<768)&&(v.style.transform="translateX(-100%)")})),document.addEventListener("click",(function(e){var t=e.target,n=t.closest(".menu"),r=t.closest(".close-btn"),o=t.closest("ul>li>a");null!==n&&window.innerWidth>=768?(v.removeAttribute("style"),m()):(null!==r||null!==o)&&window.innerWidth>=768&&m()})),l=document.querySelector(".popup"),u=document.querySelector(".popup-content"),s=document.querySelector(".service"),d=document.querySelectorAll(".popup-btn"),s.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-btn")&&d.forEach((function(e){var n,r;e===t&&window.innerWidth<768?l.style.display="block":e===t&&window.innerWidth>=768&&(l.style.display="block",n=0,r=document.documentElement.offsetHeight/50,requestAnimationFrame((function e(){requestAnimationFrame(e),(n+=5)-5<r?u.style.top=n+"px":n===r&&cancelAnimationFrame(e)})))}))})),l.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?l.style.display="none":(t=t.closest(".popup-content"))||(l.style.display="none")})),a=document.querySelector(".service-header"),c=document.querySelectorAll(".service-header-tab"),i=document.querySelectorAll(".service-tab"),a.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab")).classList.contains("service-header-tab")&&c.forEach((function(e,n){e===t&&function(e){for(var t=0;t<i.length;t++)e===t?(c[t].classList.add("active"),i[t].classList.remove("hidden")):(c[t].classList.remove("active"),i[t].classList.add("hidden"))}(n)}))})),function(){var e=document.querySelectorAll(".portfolio-item"),t=document.querySelector(".portfolio-content");e.forEach((function(){var e=document.createElement("li");e.setAttribute("class","dot"),document.querySelector(".portfolio-dots").appendChild(e)}));var n,r=0,o=document.querySelectorAll(".dot");0===r&&o[0].setAttribute("class","dot dot-active");var a=function(e,t,n){e[t].classList.remove(n)},c=function(e,t,n){e[t].classList.add(n)},i=function(){a(e,r,"portfolio-item-active"),a(o,r,"dot-active"),++r>=e.length&&(r=0),c(e,r,"portfolio-item-active"),c(o,r,"dot-active")},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;n=setInterval(i,e)};t.addEventListener("click",(function(t){t.preventDefault();var n=t.target;n.matches(".portfolio-btn, .dot")&&(a(e,r,"portfolio-item-active"),a(o,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&o.forEach((function(e,t){e===n&&(r=t)})),r>=e.length&&(r=0),r<0&&(r=e.length-1),c(e,r,"portfolio-item-active"),c(o,r,"dot-active"))})),t.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(n)})),t.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&l()})),l()}(),(o=document.querySelectorAll(".command__photo")).forEach((function(e){e.addEventListener("mouseover",(function(e){var t=e.target,n=[t.dataset.img,t.src];t.src=n[0],t.dataset.img=n[1]}))})),o.forEach((function(e){e.addEventListener("mouseout",(function(e){var t=e.target,n=[t.src,t.dataset.img];t.dataset.img=n[0],t.src=n[1]}))})),document.querySelector(".calc-block").addEventListener("input",(function(e){var t=e.target;t.matches('[type="text"]')&&(t.value=t.value.replace(/\D/g,""))})),document.querySelectorAll('[placeholder="Номер телефона"]').forEach((function(e){e.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^+0-9]/g,"")}))})),document.querySelectorAll('[placeholder="Ваш номер телефона"]').forEach((function(e){e.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^+0-9]/g,"")}))})),document.querySelectorAll('[placeholder="E-mail"').forEach((function(e){e.setAttribute("required",""),e.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^a-z@\-_.!~*']/gi,"")}))})),document.querySelectorAll('[placeholder="Ваш E-mail"').forEach((function(e){e.setAttribute("required",""),e.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^a-z@\-_.!~*']/gi,"")}))})),e=document.querySelectorAll('[placeholder="Ваше имя"]'),t=document.querySelectorAll('[placeholder="Ваше сообщение"]'),n=function(e){var t=e.target;t.value=t.value.replace(/[^а-я-ё\-\s]/gi,"")},r=function(e){var t=e.target;t.value=t.value.replace(/[^а-я-ё\d\s.,!?:;]/gi,"")},e.forEach((function(e){e.addEventListener("input",n),e.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/ +/g," ").trim(),t.value=t.value.replace(/([А-ЯЁ])/g,(function(e){return e.toLowerCase()})),t.value=t.value.replace(/(( |^)[а-яё])(?=[а-яё])/g,(function(e){return e.toUpperCase()}))}))})),t.forEach((function(e){e.addEventListener("input",r),e.addEventListener("blur",(function(e){var t=e.target;t.value=t.value.replace(/^[ -]*|( |-)(?=\1)|[ -]*$/g,"").replace(/ +/g," ").trim()}))})),document.querySelectorAll("form").forEach((function(e){e.querySelectorAll("input").forEach((function(e){e.addEventListener("blur",(function(e){var t=e.target;if("Номер телефона"===t.placeholder||"Ваш номер телефона"===t.placeholder){var n=function(e){var n=e.substr(0,1),r=t.value,o=r.replace(/[a-zа-яё/.,\-=_)({*&$%#@'"!~^:;?`<>№|\\})]/gi,"");return(r=o).length<11?r="":"+"===n?r=r.substr(1).includes("+")||"7"!==r[1]?"":r.substr(0,12):"7"===n||"8"===n?r=r.substr(1).includes("+")?"":r.substr(0,11):"+"!==n||"7"!==n||"8"!==n?r="":void 0}(t.value.replace(/[a-zа-яё/.,\-=_)({*&$%#@'"!~^:;?`<>№|\\})]/gi,""));t.value=n}}))}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;function t(e){var t=e.timing,n=e.draw,r=e.duration,o=performance.now();requestAnimationFrame((function e(a){var c=(a-o)/r;c>1&&(c=1);var i=t(c);n(i),c<1&&requestAnimationFrame(e)}))}var n=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-count"),c=document.querySelector(".calc-day"),i=document.getElementById("total"),l=function(){var n=0,l=1,u=1,s=+r.options[r.selectedIndex].value,d=+o.value;a.value>1&&(l+=(a.value-1)/10),c.value&&c.value<5?u*=2:c.value&&c.value<10&&(u*=1.5),s&&d&&(n=e*s*d*l*u),t({duration:500,timing:function(e){return e},draw:function(e){i.textContent=Math.floor(e*n)}})};n.addEventListener("input",(function(e){var t=e.target;(t.matches(".calc-type")||t.matches(".calc-square")||t.matches(".calc-count")||t.matches(".calc-day"))&&l()}))}(),document.body.addEventListener("submit",(function(e){e.preventDefault(),function(e){var t=document.createElement("div");t.style.cssText="font-size: 2rem; \n  color: white; \n  ",e.appendChild(t),t.textContent="Загрузка...";var n=new FormData(e),r={};n.forEach((function(e,t){r[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(r).then((function(n){if(200!==n.status)throw new Error("status network not 200");e.reset(),t.innerHTML="Отправлено!",setTimeout((function(){t.parentNode.removeChild(t)}),5e3)})).catch((function(e){t.innerHTML="Что-то пошло не так...",console.error(e)}))}(e.target)}))})();